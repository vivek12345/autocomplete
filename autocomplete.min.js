!function(){var t=function(){return{isBlankString:function(t){return!t||/^\s*$/.test(t)},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},debounce:function(t,e,s){var n,i;return function(){var o,r,a=this,h=arguments;return o=function(){n=null,s||(i=t.apply(a,h))},r=s&&!n,clearTimeout(n),n=setTimeout(o,e),r&&(i=t.apply(a,h)),i}},extend:function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t},addMultipleEventSources:function(t,e,s){for(var e=e.split(" "),n=0;n<e.length;n++)t.addEventListener(e[n],s)}}}(),e=function(e){this.maxSize=t.isNumber(e)?e:100,this.reset(),this.maxSize<=0&&(this.set=this.get=null)};e.prototype.set=function(t,e){var s,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key]),(s=this.hash[t])?(s.val=e,this.list.moveToFront(s)):(s=new n(t,e),this.list.add(s),this.hash[t]=s,this.size++)},e.prototype.get=function(t){var e=this.hash[t];return e?(this.list.moveToFront(e),e.val):void 0},e.prototype.reset=function(){this.size=0,this.hash={},this.list=new s};var s=function(){this.head=this.tail=null};s.prototype.add=function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},s.prototype.remove=function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},s.prototype.moveToFront=function(t){this.remove(t),this.add(t)};var n=function(t,e){this.key=t,this.val=e,this.prev=this.next=null},i=function(s){var n={url:null,cache:!0,waitTime:0};this.options=t.extend(n,s||{}),this.options.cache?this.cache=new e(10):this.cache=null,this.attachEventHandlers()};i.prototype.attachEventHandlers=function(){var e=this,s="keydown keypress cut paste",n=document.querySelector(this.options.el);t.addMultipleEventSources(n,s,function(t){e.handleInputChangeEvent()}),n.addEventListener("blur",e.removeDropDownMenu)},i.prototype.sendXhrRequest=function(t){var e=this,s=new XMLHttpRequest;s.withCredentials=!1,s.open("GET",this.options.url+"?term="+t),s.onreadystatechange=function(){200==this.status&&4==this.readyState&&(e.cache.set(t,this.responseText),e.handleResponse(this.responseText))},s.send()},i.prototype.handleInputChangeEvent=t.debounce(function(){this.fetchAutocompleteData()},200),i.prototype.fetchAutocompleteData=function(){var t=document.querySelector(this.options.el).value.trim();t.length>this.options.minLength?this.cache&&this.cache.get(t)?this.handleResponse(this.cache.get(t)):this.sendXhrRequest(t):null},i.prototype.removeDropDownMenu=function(){document.querySelector(".tt-dataset-1").remove()},i.prototype.handleResponse=function(t){var e;try{e=JSON.parse(t)}catch(s){e=null}var n='<div class="tt-dataset-1"><span class="tt-suggestions" style="display:block;"></span></div>',i=document.querySelector(".tt-dropdown-menu");i.innerHTML=n;var o=this.generateHtml(e.data),r=document.querySelector(".tt-suggestions");r.innerHTML=o},i.prototype.generateHtml=function(t){var e="";return t&&t.forEach(function(t){if("product"==t.type){var s=['<div class="tt-suggestion">','<div class="custom_results_image custom_results">','<div class="result_image hidden-xs hidden-sm" style="background-image:url(http://img1.craftsvilla.com/thumb/166x166/'+t.image+')"></div>','<div class="result_text">'+t.content.text+"</div>"].join("\n");t.vendor_name.trim().length&&(s=s.concat(['<div class="result_text hidden-xs hidden-sm">by '+t.vendor_name+"</div>"]));var n=['<div class="result_text hidden-xs hidden-sm"><span class="discount_price">Rs. '+parseInt(t.discounted_price)+"</span></div>",'<div class="result_type visible-xs visible-sm" id="product_type">  Product </div>',"</div></div>"].join("\n");s=s.concat(n),e=e.concat(s)}else{var s=['<div class="tt-suggestion">','<div class="custom_results_text custom_results">','<div class="result_text">'+t.content.text+"</div>",'<div class="result_type"> '+t.type+"</div>","</div>","</div>"].join("\n");e=e.concat(s)}}),e},window.Autocomplete=i}();
